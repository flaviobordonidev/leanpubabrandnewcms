# Understanding Rails Routes and RESTful Design

* https://medium.com/podiihq/understanding-rails-routes-and-restful-design-a192d64cbbb5

Routes
https://richonrails.com/articles/understanding-rails-routing


A router in Rails is a directing module that recognizes browser URLs and dispatches them to the controller actions requested. To make it simple, when you enter a url in your domain, the rails router will know which controller and action to handle your url.


Browser URL         : /pages/home
routes.rb           : get "pages/home"
pages_controller.rb : def home ... end
views/pages/home.html.erb : ...

get “pages/home”, to: pages#home”

da console
---
$ rake routes
---



## Rails RESTful Design

routes.rb           : resources :users


resources :users, only: [:index, :new, :create]


---
resources :users, :books, :messages

è uguale a:

resources :users
resources :books
resources :messages
---




## Controller Namespace and Routing


namespace :admin do 
 resources :articles, :comments
end


/admin/articles




## Naming Routes

Instead of using raw urls generated by Rails app, Rails allows you to refer to routes by names. For example, the following will create a logout_path or logout_url a named helpers in your application.

get “sessions/destroy”, as: :logout 

To refer to this route anywhere in your application you can write:

logout_path

Beauty of this being that you can always change the controller and action without refactoring so much code in the views and other controllers.

* http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing




## Redirection

You can redirect any path to another path using the redirect helper in your router:

get ‘/stories’, to: redirect(‘/articles’)

Please note that default redirection is a 301 “Moved Permanently” redirect. Keep in mind that some web browsers or proxy servers will cache this type of redirect, making the old page inaccessible. 
You can use the :status option to change the response status:

get ‘/stories’, to: redirect(‘/articles’, status : 302)

This depicts a “Moved Temporarily” so the next time user requests for the resource the redirect will always occur. If we used the 301 then if a browser caches it as inaccessible then if a user tries to access the route for a second time the browser will not even make the request to our server assuming that the resources was permanently moved


