<%# == Meta_data ============================================================ %>

<% provide(:page_title, "All posts") %>
<% provide(:authors_active, "active") %>

<%# == Meta_data - end ====================================================== %>

<div class="row">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Title</th>
        <th>Incipit</th>
        <th>Author</th>
        <th>Published</th>
        <th colspan="3"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%= post.title %></td>
          <td><%= post.incipit %></td>
          <td><%= post.user.email %></td>
          <% if post.published? %>
            <td><%= post.published_at %></td>
            <td><%= link_to 'Unpublish', unpublish_authors_post_path(post), method: :put, class: 'btn btn-sm btn-warning' %></td>
          <% else %>
            <td>draft</td>
            <td><%= link_to 'Publish', publish_authors_post_path(post), method: :put, class: 'btn btn-sm btn-success' %></td>
          <% end %>
          
          <td><%= link_to 'Show', post_path(post) %></td>
          <td><%= link_to 'Edit', edit_authors_post_path(post) %></td>
          <td><%= link_to 'Destroy', authors_post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>


<%= link_to 'New Post', new_authors_post_path %>
<p id="notice"><%= notice %></p>
