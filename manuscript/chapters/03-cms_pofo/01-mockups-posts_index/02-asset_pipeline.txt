# Asset pipeline

implementiamo lo stylesheet, il codice javascript e le immagini attraverso l'asset_pipeline.

Risorse web:

* [rails guide: 2.2 Asset Organization](http://guides.rubyonrails.org/asset_pipeline.html)




## Apriamo il branch "Asset Pipeline"

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git checkout -b ap
~~~~~~~~




## Cos'è l'asset_pipeline

Introdotto da Rails 4 l'asset_pipeline è un modo di organizzare i files con codice dedicato al frontend.

Ci sono fondamentalmente tre cartelle principali dove mettere il codice:

1. app/assets
2. lib/assets
3. vendor/assets/

Il codice in app/assets è quello che ha la precedenza e questa cartella è pensata per tutto il codice scritto da noi per qusta applicazione.
Il codice in lib/assets viene per secondo ed è pensata per il codice scritto da noi a livello di libreria, ossia del codice che utilizzeremo anche in altre applicazioni.
Il coice in vendor/assets/ è interpellato per ultimo e questa cartella è pensata per codice scritto da terze parti. Ed è proprio il nostro caso. 
Quindi il codice js, saas e le immagini del canvas le mettiamo nella cartella vendor/assets.

Nei nostri files manifest possiamo omettere il percorso principale. 
Ad esempio nel file manifest app/asset/application.js le seguenti linee di codice:

//= require home
//= require moovinator
//= require slider
//= require phonebox

richiamano i seguenti files:

app/assets/javascripts/home.js
lib/assets/javascripts/moovinator.js
vendor/assets/javascripts/slider.js

* Se ci fosse un file app/assets/javascripts/slider.js questo avrebbe la precedenza e maschererebbe il file in vendor/assets/javascripts/slider.js. E' bene quindi stare attenti ed evitare files con lo stesso nome.
* Inoltre il raggruppamento avviene in ordine alfabetico quindi si deve stare attenti alla sequenza del codice perché spesso è importante che alcuni files siano raggruppati prima di altri.
* Inoltre si deve prestare attenzione alla gestione delle sottocartelle perché, anche se è possibile usarle, si rischia di doverle dichiarare una per una. 
* È importante notare che i file a cui si desidera fare riferimento all'esterno di un "manifest" devono essere aggiunti all'array di precompilazione o non saranno disponibili nell'ambiente di produzione.
* Inoltre da rails 5.2 si preferisce all'asset_pipeline il webpack ma al momento i due ambienti coesistono.




## importiamo i files stylesheets e javascripts da Pofo all'asset_pipeline

E' arrivato il momento di importare le librerie stylesheets e javascripts dal tema html alla nostra app Rails. 
Nella nostra app creiamo una sottocartelle con il nome del tema, nol nostro caso "pofo", per ognuno dei percorsi dell'asset_pipeline:

* .../app/assets/stylesheets/pofo
* .../app/assets/javascripts/pofo




### Seguiamo l'ordine delle chiamate sul file posts_index

Normalmente gli stylesheets sono all'inizio, nei tags "<head>..</head>". Invece i javascripts sono alla fine prima del tag di chiusura "...</body>".

{title=".../app/views/example_static_pages/posts_index.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=19}
~~~~~~~~
        <!-- animation -->
        <link rel="stylesheet" href="css/animate.css" />
        <!-- bootstrap -->
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <!-- et line icon --> 
        <link rel="stylesheet" href="css/et-line-icons.css" />
        <!-- font-awesome icon -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />
        <!-- themify icon -->
        <link rel="stylesheet" href="css/themify-icons.css">
        <!-- swiper carousel -->
        <link rel="stylesheet" href="css/swiper.min.css">
        <!-- justified gallery  -->
        <link rel="stylesheet" href="css/justified-gallery.min.css">
        <!-- magnific popup -->
        <link rel="stylesheet" href="css/magnific-popup.css" />
        <!-- revolution slider -->
        <link rel="stylesheet" type="text/css" href="revolution/css/settings.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="revolution/css/layers.css">
        <link rel="stylesheet" type="text/css" href="revolution/css/navigation.css">
        <!-- bootsnav -->
        <link rel="stylesheet" href="css/bootsnav.css">
        <!-- style -->
        <link rel="stylesheet" href="css/style.css" />
        <!-- responsive css -->
        <link rel="stylesheet" href="css/responsive.css" />
~~~~~~~~

{title=".../app/views/example_static_pages/posts_index.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=892}
~~~~~~~~
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/modernizr.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
        <script type="text/javascript" src="js/skrollr.min.js"></script>
        <script type="text/javascript" src="js/smooth-scroll.js"></script>
        <script type="text/javascript" src="js/jquery.appear.js"></script>
        <!-- menu navigation -->
        <script type="text/javascript" src="js/bootsnav.js"></script>
        <script type="text/javascript" src="js/jquery.nav.js"></script>
        <!-- animation -->
        <script type="text/javascript" src="js/wow.min.js"></script>
        <!-- page scroll -->
        <script type="text/javascript" src="js/page-scroll.js"></script>
        <!-- swiper carousel -->
        <script type="text/javascript" src="js/swiper.min.js"></script>
        <!-- counter -->
        <script type="text/javascript" src="js/jquery.count-to.js"></script>
        <!-- parallax -->
        <script type="text/javascript" src="js/jquery.stellar.js"></script>
        <!-- magnific popup -->
        <script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
        <!-- portfolio with shorting tab -->
        <script type="text/javascript" src="js/isotope.pkgd.min.js"></script>
        <!-- images loaded -->
        <script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>
        <!-- pull menu -->
        <script type="text/javascript" src="js/classie.js"></script>
        <script type="text/javascript" src="js/hamburger-menu.js"></script>
        <!-- counter  -->
        <script type="text/javascript" src="js/counter.js"></script>
        <!-- fit video  -->
        <script type="text/javascript" src="js/jquery.fitvids.js"></script>
        <!-- equalize -->
        <script type="text/javascript" src="js/equalize.min.js"></script>
        <!-- skill bars  -->
        <script type="text/javascript" src="js/skill.bars.jquery.js"></script> 
        <!-- justified gallery  -->
        <script type="text/javascript" src="js/justified-gallery.min.js"></script>
        <!--pie chart-->
        <script type="text/javascript" src="js/jquery.easypiechart.min.js"></script>
        <!-- instagram -->
        <script type="text/javascript" src="js/instafeed.min.js"></script>
        <!-- retina -->
        <script type="text/javascript" src="js/retina.min.js"></script>
        <!-- revolution -->
        <script type="text/javascript" src="revolution/js/jquery.themepunch.tools.min.js"></script>
        <script type="text/javascript" src="revolution/js/jquery.themepunch.revolution.min.js"></script>
        <!-- revolution slider extensions (load below extensions JS files only on local file systems to make the slider work! The following part can be removed on server for on demand loading) -->
        <!--<script type="text/javascript" src="revolution/js/extensions/revolution.extension.actions.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.carousel.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.migration.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.navigation.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.parallax.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.video.min.js"></script>-->
        <!-- setting -->
        <script type="text/javascript" src="js/main.js"></script>
~~~~~~~~




### Impoprtiamo le librerie nella nostra app (da -> a)

* .../css/animate.css                 ->  .../app/assets/stylesheets/pofo/css/animate.css
* .../css/bootstrap.min.css           ->  .../app/assets/stylesheets/pofo/css/bootstrap.min.css
* .../css/et-line-icons.css           ->  .../app/assets/stylesheets/pofo/css/et-line-icons.css
* .../css/font-awesome.min.css        ->  .../app/assets/stylesheets/pofo/css/font-awesome.min.css
* .../css/themify-icons.css           ->  .../app/assets/stylesheets/pofo/css/themify-icons.css
* .../css/swiper.min.css              ->  .../app/assets/stylesheets/pofo/css/swiper.min.css
* .../css/justified-gallery.min.css   ->  .../app/assets/stylesheets/pofo/css/justified-gallery.min.css
* .../css/magnific-popup.css          ->  .../app/assets/stylesheets/pofo/css/magnific-popup.css
* .../revolution/css/settings.css     ->  .../app/assets/stylesheets/pofo/revolution/css/settings.css
* .../revolution/css/layers.css       ->  .../app/assets/stylesheets/pofo/revolution/css/layers.css
* .../revolution/css/navigation.css   ->  .../app/assets/stylesheets/pofo/revolution/css/navigation.css
* .../css/bootsnav.css                ->  .../app/assets/stylesheets/pofo/css/bootsnav.css
* .../css/style.css                   ->  .../app/assets/stylesheets/pofo/css/style.css
* .../css/responsive.css              ->  .../app/assets/stylesheets/pofo/css/responsive.css

* .../js/jquery.js                      ->  .../app/assets/javascripts/pofo/js/jquery.js
* .../js/modernizr.js                   ->  .../app/assets/javascripts/pofo/js/modernizr.js
* .../js/bootstrap.min.js               ->  .../app/assets/javascripts/pofo/js/bootstrap.min.js
* .../js/jquery.easing.1.3.js           ->  .../app/assets/javascripts/pofo/js/jquery.easing.1.3.js
* .../js/skrollr.min.js                 ->  .../app/assets/javascripts/pofo/js/skrollr.min.js
* .../js/smooth-scroll.js               ->  .../app/assets/javascripts/pofo/js/smooth-scroll.js
* .../js/jquery.appear.js               ->  .../app/assets/javascripts/pofo/js/jquery.appear.js
* .../js/bootsnav.js                    ->  .../app/assets/javascripts/pofo/js/bootsnav.js
* .../js/jquery.nav.js                  ->  .../app/assets/javascripts/pofo/js/jquery.nav.js
* .../js/wow.min.js                     ->  .../app/assets/javascripts/pofo/js/wow.min.js
* .../js/page-scroll.js                 ->  .../app/assets/javascripts/pofo/js/page-scroll.js
* .../js/swiper.min.js                  ->  .../app/assets/javascripts/pofo/js/swiper.min.js
* .../js/jquery.count-to.js             ->  .../app/assets/javascripts/pofo/js/jquery.count-to.js
* .../js/jquery.stellar.js              ->  .../app/assets/javascripts/pofo/js/jquery.stellar.js
* .../js/jquery.magnific-popup.min.js   ->  .../app/assets/javascripts/pofo/js/jquery.magnific-popup.min.js
* .../js/isotope.pkgd.min.js            ->  .../app/assets/javascripts/pofo/js/isotope.pkgd.min.js
* .../js/imagesloaded.pkgd.min.js       ->  .../app/assets/javascripts/pofo/js/imagesloaded.pkgd.min.js
* .../js/classie.js                     ->  .../app/assets/javascripts/pofo/js/classie.js
* .../js/hamburger-menu.js              ->  .../app/assets/javascripts/pofo/js/hamburger-menu.js
* .../js/counter.js                     ->  .../app/assets/javascripts/pofo/js/counter.js
* .../js/jquery.fitvids.js              ->  .../app/assets/javascripts/pofo/js/jquery.fitvids.js
* .../js/equalize.min.js                ->  .../app/assets/javascripts/pofo/js/equalize.min.js
* .../js/skill.bars.jquery.js           ->  .../app/assets/javascripts/pofo/js/skill.bars.jquery.js
* .../js/justified-gallery.min.js       ->  .../app/assets/javascripts/pofo/js/justified-gallery.min.js
* .../js/jquery.easypiechart.min.js     ->  .../app/assets/javascripts/pofo/js/jquery.easypiechart.min.js
* .../js/instafeed.min.js               ->  .../app/assets/javascripts/pofo/js/instafeed.min.js
* .../js/retina.min.js                  ->  .../app/assets/javascripts/pofo/js/retina.min.js
* .../revolution/js/jquery.themepunch.tools.min.js      ->  .../app/assets/javascripts/pofo/revolution/js/jquery.themepunch.tools.min.js
* .../revolution/js/jquery.themepunch.revolution.min.js ->  .../app/assets/javascripts/pofo/revolution/js/jquery.themepunch.revolution.min.js
* .../js/main.js                        ->  .../app/assets/javascripts/pofo/js/main.js




### Impostiamo su posts_index gli helpers per puntare all'asset_pipeline

Adattiamo le chiamate agli stylesheets di posts_index per rispondere alle convenzioni dell'asset_pipeline Rails. E' preferibile implementare tutte insieme le chiamate stylesheets e javascripts perché spesso sono collegate le une alle altre. Al codice javascript servono i css ed i soli css a volte danno una pagina bianca, che è pensata per dare tempo di caricare gli altri elementi.

I> Attenzione! Le estensioni non vengono messe

Per lo stylesheet passiamo dalla versione HTML a quella Rails come da seguente esempio (da h: ad r:)

h : <link rel="stylesheet" href="***.css" type="text/css" />
r : <%= stylesheet_link_tag '***', media: 'all', 'data-turbolinks-track': 'reload' %>


Per il javascript passiamo dalla versione HTML a quella Rails come da seguente esempio (da h: ad r:)

h : <script src="***.js"></script>
r : <%= javascript_include_tag '***', 'data-turbolinks-track' => true %>


{title=".../app/views/mockups/posts_index.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=19}
~~~~~~~~
        <!-- animation -->
        <%= stylesheet_link_tag 'pofo/css/animate', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- bootstrap -->
        <%= stylesheet_link_tag 'pofo/css/bootstrap.min', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- et line icon --> 
        <%= stylesheet_link_tag 'pofo/css/et-line-icons', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- font-awesome icon -->
        <%= stylesheet_link_tag 'pofo/css/font-awesome.min', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- themify icon -->
        <%= stylesheet_link_tag 'pofo/css/themify-icons', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- swiper carousel -->
        <%= stylesheet_link_tag 'pofo/css/swiper.min', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- justified gallery  -->
        <%= stylesheet_link_tag 'pofo/css/justified-gallery.min', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- magnific popup -->
        <%= stylesheet_link_tag 'pofo/css/magnific-popup', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- revolution slider -->
        <%= stylesheet_link_tag 'pofo/revolution/css/settings', media: 'all', 'data-turbolinks-track': 'reload' %>
        <%= stylesheet_link_tag 'pofo/revolution/css/layers', media: 'all', 'data-turbolinks-track': 'reload' %>
        <%= stylesheet_link_tag 'pofo/revolution/css/navigation', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- bootsnav -->
        <%= stylesheet_link_tag 'pofo/css/bootsnav', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- style -->
        <%= stylesheet_link_tag 'pofo/css/style', media: 'all', 'data-turbolinks-track': 'reload' %>
        <!-- responsive css -->
        <%= stylesheet_link_tag 'pofo/css/responsive', media: 'all', 'data-turbolinks-track': 'reload' %>
~~~~~~~~

...

{id="03-01-02_01", title=".../app/views/mockups/posts_index.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=891}
~~~~~~~~
        <!-- javascript libraries -->
        <%= javascript_include_tag 'pofo/js/jquery', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/modernizr', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/bootstrap.min', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/jquery.easing.1.3', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/skrollr.min', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/smooth-scroll', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/jquery.appear', 'data-turbolinks-track' => true %>
        <!-- menu navigation -->
        <%= javascript_include_tag 'pofo/js/bootsnav.js', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/jquery.nav.js', 'data-turbolinks-track' => true %>
        <!-- animation -->
        <%= javascript_include_tag 'pofo/js/wow.min.js', 'data-turbolinks-track' => true %>
        <!-- page scroll -->
        <%= javascript_include_tag 'pofo/js/page-scroll.js', 'data-turbolinks-track' => true %>
        <!-- swiper carousel -->
        <%= javascript_include_tag 'pofo/js/swiper.min.js', 'data-turbolinks-track' => true %>
        <!-- counter -->
        <%= javascript_include_tag 'pofo/js/jquery.count-to.js', 'data-turbolinks-track' => true %>
        <!-- parallax -->
        <%= javascript_include_tag 'pofo/js/jquery.stellar.js', 'data-turbolinks-track' => true %>
        <!-- magnific popup -->
        <%= javascript_include_tag 'pofo/js/jquery.magnific-popup.min.js', 'data-turbolinks-track' => true %>
        <!-- portfolio with shorting tab -->
        <%= javascript_include_tag 'pofo/js/isotope.pkgd.min.js', 'data-turbolinks-track' => true %>
        <!-- images loaded -->
        <%= javascript_include_tag 'pofo/js/imagesloaded.pkgd.min.js', 'data-turbolinks-track' => true %>
        <!-- pull menu -->
        <%= javascript_include_tag 'pofo/js/classie.js', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/js/hamburger-menu.js', 'data-turbolinks-track' => true %>
        <!-- counter  -->
        <%= javascript_include_tag 'pofo/js/counter.js', 'data-turbolinks-track' => true %>
        <!-- fit video  -->
        <%= javascript_include_tag 'pofo/js/jquery.fitvids.js', 'data-turbolinks-track' => true %>
        <!-- equalize -->
        <%= javascript_include_tag 'pofo/js/equalize.min.js', 'data-turbolinks-track' => true %>
        <!-- skill bars  -->
        <%= javascript_include_tag 'pofo/js/skill.bars.jquery.js', 'data-turbolinks-track' => true %> 
        <!-- justified gallery  -->
        <%= javascript_include_tag 'pofo/js/justified-gallery.min.js', 'data-turbolinks-track' => true %>
        <!--pie chart-->
        <%= javascript_include_tag 'pofo/js/jquery.easypiechart.min.js', 'data-turbolinks-track' => true %>
        <!-- instagram -->
        <%= javascript_include_tag 'pofo/js/instafeed.min.js', 'data-turbolinks-track' => true %>
        <!-- retina -->
        <%= javascript_include_tag 'pofo/js/retina.min.js', 'data-turbolinks-track' => true %>
        <!-- revolution -->
        <%= javascript_include_tag 'pofo/revolution/js/jquery.themepunch.tools.min.js', 'data-turbolinks-track' => true %>
        <%= javascript_include_tag 'pofo/revolution/js/jquery.themepunch.revolution.min.js', 'data-turbolinks-track' => true %>
        <!-- revolution slider extensions (load below extensions JS files only on local file systems to make the slider work! The following part can be removed on server for on demand loading) -->
        <!--<script type="text/javascript" src="revolution/js/extensions/revolution.extension.actions.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.carousel.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.migration.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.navigation.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.parallax.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <script type="text/javascript" src="revolution/js/extensions/revolution.extension.video.min.js"></script>-->
        <!-- setting -->
        <%= javascript_include_tag 'pofo/js/main.js', 'data-turbolinks-track' => true %>
~~~~~~~~

[Codice 01](#03-01-02_01all)



## Precompile

Nel nostro layouts/yield.html.erb non abbiamo le chiamate ai files manifest dell'asset_pipeline.

{title=".../app/views/layouts/application.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=7}
~~~~~~~~
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
~~~~~~~~

Senza queste chiamate non accediamo ai files manifest dell'asset_pipeline (assets/stylesheets/application.css e assets/javascripts/application.js)
Se proviamo una volta copiati i files riceviamo errore. Invece di passare per i files manifest, aggiungiamo le nostre chiamate ai files direttamente nel precompile. 

{title=".../config/application.rb", lang=ruby, line-numbers=on, starting-line-number=21}
~~~~~~~~
    # precompile assets pofo stylesheets                                                             
    config.assets.precompile += ['pofo/css/animate.css',
                                 'pofo/css/bootstrap.min.css',
                                 'pofo/css/et-line-icons.css',
                                 'pofo/css/font-awesome.min.css',
                                 'pofo/css/themify-icons.css',
                                 'pofo/css/swiper.min.css',
                                 'pofo/css/justified-gallery.min.css',
                                 'pofo/css/magnific-popup.css',
                                 'pofo/revolution/css/settings.css',
                                 'pofo/revolution/css/layers.css',
                                 'pofo/revolution/css/navigation.css',
                                 'pofo/css/bootsnav.css',
                                 'pofo/css/style.css',
                                 'pofo/css/responsive.css'
                                ]

    # precompile assets pofo javascripts                                                             
    config.assets.precompile += ['pofo/js/jquery.js',
                                 'pofo/js/modernizr.js',
                                 'pofo/js/bootstrap.min.js',
                                 'pofo/js/jquery.easing.1.3.js',
                                 'pofo/js/skrollr.min.js',
                                 'pofo/js/smooth-scroll.js',
                                 'pofo/js/jquery.appear.js',
                                 'pofo/js/bootsnav.js',
                                 'pofo/js/jquery.nav.js',
                                 'pofo/js/wow.min.js',
                                 'pofo/js/page-scroll.js',
                                 'pofo/js/swiper.min.js',
                                 'pofo/js/jquery.count-to.js',
                                 'pofo/js/jquery.stellar.js',
                                 'pofo/js/jquery.magnific-popup.min.js',
                                 'pofo/js/isotope.pkgd.min.js',
                                 'pofo/js/imagesloaded.pkgd.min.js',
                                 'pofo/js/classie.js',
                                 'pofo/js/hamburger-menu.js',
                                 'pofo/js/counter.js',
                                 'pofo/js/jquery.fitvids.js',
                                 'pofo/js/equalize.min.js',
                                 'pofo/js/skill.bars.jquery.js',
                                 'pofo/js/justified-gallery.min.js',
                                 'pofo/js/jquery.easypiechart.min.js',
                                 'pofo/js/instafeed.min.js',
                                 'pofo/js/retina.min.js',
                                 'pofo/revolution/js/jquery.themepunch.tools.min.js',
                                 'pofo/revolution/js/jquery.themepunch.revolution.min.js',
                                 'pofo/js/main.js'
                                ]
~~~~~~~~

l'array precompile è unico però è più elegante riempirlo in due parti di codice differenti uno per gli stylesheets e l'altro per i javascripts, inoltre inserendo un commento che spiega anche per quale tema servono le librerie (anche se la sottocartella pofo lo rende già chiaro).

Non seguiamo la convenzione Rails dell'asset_pipeline che prevede di passare per i files manifest perché non li vogliamo attivare per tutta l'applicazione, ma vogliamo richiamarli solo dalle pagine in cui è espressamente fatta la chiamata.

I> Attenzione!
I>
I> Modificando application.rb è necessario riavviare il server rails (rails s ...) per includere le modifiche.




### Verifichiamo preview

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ sudo service postgresql start
$ rails s
~~~~~~~~

apriamo il browser sull'URL:

* https://mycloud9path.amazonaws.com/example_static_pages/posts_index

Vediamo che tutto funziona come ci si aspettava. Mancano solo le immagini ed i fonts delle icone che implemntiamo nei prossimi capitoli




## archiviamo su git

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git add -A
$ git commit -m "add pofo stylesheets e javascripts"
~~~~~~~~




## Pubblichiamo su heroku

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git push heroku mp:master
~~~~~~~~




## Chiudiamo il branch

se abbiamo finito le modifiche e va tutto bene:

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git checkout master
$ git merge mp
$ git branch -d mp
~~~~~~~~




## Facciamo un backup su Github

Dal nostro branch master di Git facciamo un backup di tutta l'applicazione sulla repository remota Github.

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git push origin master
~~~~~~~~




## Il codice del capitolo

