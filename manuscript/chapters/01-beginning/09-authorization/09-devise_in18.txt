# Devise internazionalizzazione


In fase di installazione Devise ha creato il file config/locales/devise.en.yml con tutte le frasi in inglese. Per la nostra traduzione in italiano duplichiamo il file e lo rinominiamo config/locales/devise.it.yml

Cambiamo la parte iniziale da :en a :it

[codice: application config xx](#code-application-config-xx)

{title="config/locales/devise.it.yml", lang=yaml, line-numbers=on, starting-line-number=1}
~~~~~~~~
it:
  devise:
~~~~~~~~

E traduciamo il testo dei vari segnaposto. Es:

{title="config/locales/devise.it.yml", lang=yaml, line-numbers=on, starting-line-number=12}
~~~~~~~~
      invalid: "%{authentication_keys} o password non validi."
~~~~~~~~

Oppure, più semplicemente, andiamo su https://github.com/plataformatec/devise/wiki/I18n e prendiamo il file già tradotto in italiano.

I> Ricordati che i messaggi sono passati con flash keys :notice and :alert quindi devono essere attivi su views altrimenti non vengono visualizzati.

[codice: application views xx](#code-application-views-xx)

{title="views/layouts/application.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=13}
~~~~~~~~
<% flash.each do |name,msg| %>
  <div class='alert alert-<%= name == :notice ? 'success' : 'error' %>'>
    <a class='close' data-dismiss='alert'>&#215;</a>
    <%= msg %>
  </div>
<% end %>
~~~~~~~~



# Devise internazionalizzazione




## Apriamo il branch "Login Devise I18n"

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git checkout -b ldi
~~~~~~~~




## Internazionalizzazione (I18n)

Aggiungiamo il [file dei messaggi di devise](https://github.com/plataformatec/devise/wiki/I18n) per la [lingua italiana](https://gist.github.com/iwan/91c724774594c8b484c95ff1db5d1a15). Scarichiamo il file devise.it.yml dal sito web e lo uploadiamo nella cartella config/locale della nostra applicazione su cloud9.
Oppure creiamo il nuovo file devise.it.yml su config/locale e facciamo copia/incolla della traduzione. Implementiamo anche la parte di traduzione mancante [(codice: 01)](#code-login_authentication-login_devise_i18n-01) come suggerito da un utente.

{title=".../config/locale/devise.it.yml", lang=yaml, line-numbers=on, starting-line-number=30}
~~~~~~~~
 email_changed:
        subject: "Email reimpostata"
~~~~~~~~

Adesso i messaggi sono presentati correttamente.





## blabla

In fase di installazione Devise ha creato il file config/locales/devise.en.yml con tutte le frasi in inglese. Per la nostra traduzione in italiano duplichiamo il file e lo rinominiamo config/locales/devise.it.yml

Cambiamo la parte iniziale da :en a :it

{title="config/locales/devise.it.yml", lang=yaml, line-numbers=on, starting-line-number=1}
~~~~~~~~
it:
  devise:
~~~~~~~~

E traduciamo il testo dei vari segnaposto. Es:

{title="config/locales/devise.it.yml", lang=yaml, line-numbers=on, starting-line-number=12}
~~~~~~~~
      invalid: "%{authentication_keys} o password non validi."
~~~~~~~~

Oppure, più semplicemente, andiamo su https://github.com/plataformatec/devise/wiki/I18n e prendiamo il file già tradotto in italiano.

I> Ricordati che i messaggi sono passati con flash keys :notice and :alert quindi devono essere attivi su views altrimenti non vengono visualizzati.

{title="views/layouts/application.html.erb", lang=HTML+Mako, line-numbers=on, starting-line-number=13}
~~~~~~~~
<% flash.each do |name,msg| %>
  <div class='alert alert-<%= name == :notice ? 'success' : 'error' %>'>
    <a class='close' data-dismiss='alert'>&#215;</a>
    <%= msg %>
  </div>
<% end %>
~~~~~~~~




verifichiamo che funziona tutto

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ sudo service postgresql start
$ rails s -b $IP -p $PORT
~~~~~~~~

eseguiamo un git commit

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git add -A
$ git commit -m "add login_devise"
~~~~~~~~




## Publichiamo su heroku

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git push heroku di18n:master
~~~~~~~~




## Chiudiamo il branch

se abbiamo finito le modifiche e va tutto bene:

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git checkout master
$ git merge di18n
$ git branch -d di18n
~~~~~~~~