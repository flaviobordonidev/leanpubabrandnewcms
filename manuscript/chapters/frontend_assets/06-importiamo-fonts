# Importiamo i fonts




## Apriamo il branch "Import Canvas Fonts"

{title="terminal", lang=bash, line-numbers=off}
~~~~~~~~
$ git checkout -b icf
~~~~~~~~




## Implementiamo i fonts in locale

abbiamo già importato il css sull'header.
Non ci resta che copiare la cartella HTML/css/fonts su assets/stylesheets/css/fonts
in locale questo funziona.


I> Attenzione se usate font-url() funziona in locale ma non su heroku. Per funzionare anche su heroku usate asset-url() 

Approfondimenti web:

*[custom font not working in heroku](http://stackoverflow.com/questions/21691846/custom-font-not-working-in-heroku)




## Implementiamo i fonts per Heroku

Cambiamo tutte le chiamate url(path) con l'helper rails asset-url(file_name)

url('fonts/xxx') -> asset-url('xxx') <---- vecchio cambio che ha funzionato in passato (da riprovare)

url('fonts/xxx') -> font-url('full/path')


Assets like fonts will work on development but not production if you are using regular old css to locate your assets rather than the asset pipeline helpers. Rails 4 added breaking changes to the asset pipeline to encourage people to use it properly, and not use the old css method of referencing assets.

To resolve this, you need to use the new asset pipeline helpers to point to the fingerprinted, cached versions of your fonts. Rather than url (which does not use the asset pipeline), you need to use font-url (which does use it). To do this, you may have to use Sass or embed ERB in your stylesheet.

{title=".../app/assets/stylesheets/css/font-icons.css", lang=ruby, line-numbers=on, starting-line-number=17}
~~~~~~~~
@font-face {
	font-family: 'font-icons';
	src:url('fonts/font-icons.eot');
	src:url('fonts/font-icons.eot') format('embedded-opentype'),
		url('fonts/font-icons.woff') format('woff'),
		url('fonts/font-icons.ttf') format('truetype'),
		url('fonts/font-icons.svg') format('svg');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'lined-icons';
	src:url('fonts/lined-icons.eot');
	src:url('fonts/lined-icons.eot') format('embedded-opentype'),
		url('fonts/lined-icons.woff') format('woff'),
		url('fonts/lined-icons.ttf') format('truetype'),
		url('fonts/lined-icons.svg') format('svg');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Simple-Line-Icons';
	src:url('fonts/Simple-Line-Icons.eot');
	src:url('fonts/Simple-Line-Icons.eot?#iefix') format('embedded-opentype'),
		url('fonts/Simple-Line-Icons.woff') format('woff'),
		url('fonts/Simple-Line-Icons.ttf') format('truetype'),
		url('fonts/Simple-Line-Icons.svg#Simple-Line-Icons') format('svg');
	font-weight: normal;
	font-style: normal;
}
~~~~~~~~

I> ATTENZIONE: assicurati di usare **.scss**

{title=".../app/assets/stylesheets/css/font-icons.scss", lang=ruby, line-numbers=on, starting-line-number=17}
~~~~~~~~
@font-face {
	font-family: 'font-icons';
	src:font-url('css/fonts/font-icons.eot');
	src:font-url('css/fonts/font-icons.eot') format('embedded-opentype'),
		font-url('css/fonts/font-icons.woff') format('woff'),
		font-url('css/fonts/font-icons.ttf') format('truetype'),
		font-url('css/fonts/font-icons.svg') format('svg');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'lined-icons';
	src:font-url('css/fonts/lined-icons.eot');
	src:font-url('css/fonts/lined-icons.eot') format('embedded-opentype'),
		font-url('css/fonts/lined-icons.woff') format('woff'),
		font-url('css/fonts/lined-icons.ttf') format('truetype'),
		font-url('css/fonts/lined-icons.svg') format('svg');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Simple-Line-Icons';
	src:font-url('css/fonts/Simple-Line-Icons.eot');
	src:font-url('css/fonts/Simple-Line-Icons.eot?#iefix') format('embedded-opentype'),
		font-url('css/fonts/Simple-Line-Icons.woff') format('woff'),
		font-url('css/fonts/Simple-Line-Icons.ttf') format('truetype'),
		font-url('css/fonts/Simple-Line-Icons.svg#Simple-Line-Icons') format('svg');
	font-weight: normal;
	font-style: normal;
}
~~~~~~~~








## PRECOMPILIAMO ?

Non mi è servito precompilare! ^_^

Precompilo l'asset pipeline per heroku e lo pubblico

A> $ RAILS_ENV=production bundle exec rake assets:precompile
A>
A> $ git push heroku import-fonts:master


Pubblichiamo su heroku

A> $ git push heroku master
