<%= form_for(component, html: {class: 'form-horizontal left-pad right-pad bottom-pad' }) do |f| %>

  <!-- # simulo l'helper h_params_path -->
  <%= hidden_field_tag(:locale, params[:locale]) %>
  <%= hidden_field_tag(:last_front_controller, params[:last_front_controller]) %>
  <%= hidden_field_tag(:last_front_action, params[:last_front_action]) %>
  <%= hidden_field_tag(:last_front_id, params[:last_front_id]) %>  
  <%= hidden_field_tag(:last_front_related, params[:last_front_related]) %>  
  <%= hidden_field_tag(:last_front_page, params[:last_front_page]) %>  
  <%= hidden_field_tag(:last_front_search, params[:last_front_search]) %>  
  <%= hidden_field_tag(:last_rear_controller, params[:last_rear_controller]) %>
  <%= hidden_field_tag(:last_rear_action, params[:last_rear_action]) %>
  <%= hidden_field_tag(:last_rear_id, params[:last_rear_id]) %>
  <%= hidden_field_tag(:last_rear_related, params[:last_rear_related]) %>
  <%= hidden_field_tag(:last_rear_page, params[:last_rear_page]) %>
  <%= hidden_field_tag(:last_rear_search, params[:last_rear_search]) %>
  <%= hidden_field_tag(:related, params[:related]) %>
  <%= hidden_field_tag(:page, params[:page]) %>
  <%= hidden_field_tag(:search, params[:search]) %>
  <%= hidden_field_tag(:tab_active, params[:tab_active]) %>

  <div class="form-group">

   <div class="field">
      <%= f.label :factory_id, class: "control-label" %>
      <%= f.number_field :factory_id, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->
    
    <div class="field">
      <%= f.label :supplier_id, class: "control-label" %>
      <%= f.number_field :supplier_id, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <p class = "control-label"> <%= "component.supplier_id = #{component.supplier_id} -- params[:component][:supplier_id] = #{component.supplier_id}" %></p>

    <div class="field">
      <% if component.factory_id.blank? %>
        <div class="field">
          <%= f.label :factory_id, class: "control-label" %><br>
          <%= link_to url_for(h_rear_params_path(path: "/companies", link_name: "factory", supplier_id: "#{component.supplier_id}", factory_id: "#{component.factory_id}")), class: "list-group-item" do %>
            <span class="glyphiconmy ico_company right-pad"></span>
            <%= "inserisci il costruttore" %>
          <% end %>
        </div> <!-- /.field -->
      <% else %>
        <div class="field">
          <%= f.label :factory_id, class: "control-label" %><br>
          <%= link_to url_for(h_rear_params_path(path: "/companies", link_name: "factory", supplier_id: "#{component.supplier_id}", factory_id: "#{component.factory_id}")), class: "list-group-item" do %>
          <%#= link_to companies_path(related: "companies", page: 1, search: ""), :class => "list-group-item" do %>
            <span class="glyphiconmy ico_company right-pad"></span> <%= "#{component.factory.name}" %>
            <div><%= "#{component.factory.building}" %></div>
          <% end %>
        </div> <!-- /.field -->
      <% end %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <% if component.supplier_id.blank? %>
        <div class="field">
          <%= f.label :supplier_id, class: "control-label" %><br>
          <%= link_to url_for(h_rear_params_path(path: "/companies", link_name: "supplier", supplier_id: "#{component.supplier_id}", factory_id: "#{component.factory_id}")), class: "list-group-item" do %>
            <span class="glyphiconmy ico_company right-pad"></span>
            <%= "Inseririsci il fornitore" %>
          <% end %>
        </div> <!-- /.field -->
      <% else %>
        <div class="field">
          <%= f.label :supplier_id, class: "control-label" %><br>
          <%= link_to url_for(h_rear_params_path(path: "/companies", link_name: "supplier", supplier_id: "#{component.supplier_id}", factory_id: "#{component.factory_id}")), class: "list-group-item" do %>
          <%#= link_to companies_path(related: "companies", page: 1, search: ""), :class => "list-group-item" do %>
            <span class="glyphiconmy ico_company right-pad"></span> <%= "#{component.supplier.name}" %>
            <div><%= "#{component.supplier.building}" %></div>
          <% end %>
        </div> <!-- /.field -->
      <% end %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <%= f.label :image, class: "control-label" %><br>
      <%= f.file_field :image, class: "form-control image_upload_file_field" %>
    </div>

    <div class="field">
      <%= f.label :part_number, class: "control-label" %>
      <%= f.text_field :part_number, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <%= f.label :name, class: "control-label" %>
      <%= f.text_field :name, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <%= f.label :homonym, class: "control-label" %>
      <%= f.text_field :homonym, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <%= f.label :memo, class: "control-label" %>
      <%= f.text_area :memo, class: 'form-control' %>
      <span class="help-block"></span>
    </div> <!-- /.field -->

    <div class="field">
      <%= f.label :description, class: "control-label" %>
      <% if Rails.env.development? %>
        <%= f.text_area :description, id: "description", class: 'form-control', rows: '5' %>
      <% else %>
        <%= f.hidden_field :description, id: "description" %>
      <% end %>
      <span class="help-block"></span>
    </div> <!-- /.field -->
    <%#= f.trix_editor :description, class: 'trix-white' %>
    <trix-editor input="description", class="trix-white"></trix-editor>

  </div> <!-- /form-group -->

  <div class="actions">
    <%= f.submit class: "btn btn-primary btn-block" %>
  </div> <!-- /.actions -->
<% end %> <!-- /form_for -->
