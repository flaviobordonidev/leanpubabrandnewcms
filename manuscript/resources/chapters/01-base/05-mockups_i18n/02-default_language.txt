# Lingua di default

Nel precedente capitolo eravamo rimasti con il web server attivo e la visualizzazione della lingua inglese.
In questo capitolo impostiamo come lingua di default l'italiano.




## Scegliamo la lingua di default

sulla configurazione dell'applicazione impostiamo la lingua di default cambiando il "locale" di default:

{id="01-05-02_01", title=".../config/application.rb", lang=ruby, line-numbers=on, starting-line-number=18}
```
    config.i18n.default_locale = :it
    config.i18n.fallbacks = true
```

[Codice 01](#01-05-02_01all)




### Verifichiamo preview

se era attivo stoppare il webserver (CTRL+C) e riavviarlo per permettere a Rails di caricare il file it.yml

{caption: "terminal", format: bash, line-numbers: false}
```
$ sudo service postgresql start
$ rails s
```

Se visualizziamo sul browser vediamo che, al posto dei segnoposto, ora c'è la lingua italiana.

* https://mycloud9path.amazonaws.com/mockups/page_a




## Refactoring lingua di default

Spostiamo le linee di codice all'interno di config/initializers come richiesto dalle convenzioni rails.

Creaiamo un nuovo file con estensione ".rb" che possiamo chiamare come vogliamo; scegliamo "i18n.rb".

{id="01-05-02_02", title=".../config/initializers/i18n.rb", lang=ruby, line-numbers=on, starting-line-number=1}
```
# Be sure to restart your server when you modify this file.

# Set the default language.
Rails.application.config.i18n.default_locale = :it
Rails.application.config.i18n.fallbacks = true
```

[Codice 02](#01-05-02_02all)

Come si può notare in questo caso abbiamo dovuto mettere tutto il percorso a partire da " Rails.appplication. " mentre quando eravamo su " application.rb " questo non era necessario perché ci trovavamo già all'interno della classe application che ereditava da " Rails::Application ".

Abbiamo inoltre aggiunto due linee di commento all'inizio.




## Salviamo su Git

{title="terminal", lang=bash, line-numbers=off}
```
$ git add -A
$ git commit -m "set i18n default_locale = :it"
```




## publichiamo su heroku

{title="terminal", lang=bash, line-numbers=off}
```
$ git push heroku mi:master
```




### Verifichiamo in produzione

https://myapp-1-blabla.herokuapp.com/

![Fig. 01](images/01-beginning/05-mockups_i18n/05_01-production-working.PNG)




## Chiudiamo il branch

Lo chiudiamo nel prossimo capitolo




## Il codice del capitolo




[Codice 01](#01-05-02_01)

{id="01-05-02_01all", title=".../config/application.rb", lang=ruby, line-numbers=on, starting-line-number=21}
```
require_relative 'boot'

require 'rails/all'

# Require the gems listed in Gemfile, including any gems
# you've limited to :test, :development, or :production.
Bundler.require(*Rails.groups)

module Myapp
  class Application < Rails::Application
    # Initialize configuration defaults for originally generated Rails version.
    config.load_defaults 5.2

    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration can go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded after loading
    # the framework and any gems in your application.

    config.i18n.default_locale = :it
    config.i18n.fallbacks = true
  end
end
```




[Codice 02](#01-05-02_02)

{id="01-05-02_02all", title=".../config/initializers/i18n.rb", lang=ruby, line-numbers=on, starting-line-number=1}
```
# Be sure to restart your server when you modify this file.

# Set the default language.
Rails.application.config.i18n.default_locale = :it
Rails.application.config.i18n.fallbacks = true
```
