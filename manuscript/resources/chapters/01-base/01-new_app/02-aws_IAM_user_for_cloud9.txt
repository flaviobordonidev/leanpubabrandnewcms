# Creiamo uno IAM user per Cloud9

Non è una buona idea lavorara su cloud9 come root. Lo stesso Amazon Web Server consiglia di creare un utente IAM per gestire cloud9.


Risorse interne:

* 99-rails_references/aws_cloud9/02-share_environment




## I tre ambienti di cloud9

Su cloud9 ci sono tre raggruppamenti di ambiente:

* Your environments
    gli ambienti creati da uno specifico utente IAM. Ad esempio:
    - user_FB@870054134107 vede i suoi ambienti
    - user_AB@870054134107 vede i suoi ambienti
* Shared with you
    gli ambienti in cui l'utente è stato invitato
* Account environments
    gli ambienti di tutti gli utenti IAM di uno specifico account (Ad esempio: 870054134107)

Nel gruppo di ambiente "


Se decidiamo di creare un utente IAM facciamo ATTENZIONE:

l'utente IAM è visto come una persona differente dall'utente principale "root" e quindi avrà un suo ambiente cloud9.
Le app create come "root" o come un altro utente IAM non saranno visibili in "Your environments". Le possiamo comunque trovare in "Account environments".

E' quindi importante scegliere con cura l'utente:

* se si vogliamo raggruppare le app fatte per i vari clienti possiamo usare IAM users con il nome dei nostri clienti
* se vogliamo vedere tutte le app in un unico punto usiamo un unico IAM user. 




## Effettuiamo il login come amministratore

Vediamo adesso come creare uno IAM user dedicato a cloud9. 


https://console.aws.amazon.com/

Scegliamo il link: "Sign-in using root account credentials"




## Creiamo un nuovo utente dedicato all'uso di Cloud9

Creiamo un nuovo utente IAM con permesso di effettuare il login sulla console aws da assegnare a Flavio Bordoni.

L'utente IAM " user_FB " è quello che Flavio Bordoni userà per lavorare su amazon web server di volta in volta gli implementeremo le varie autorizzazioni.
Usiamo il prefisso " user_ " per differenziare gli utenti IAM che identificano delle persone fisiche da quelli che identificano applicativi.

Abbiamo due tipi di prefissi per gli utenti IAM:

* user_ : identifica persone fisiche che accedono ai vari servizi di aws.
* bot_  : identifica applicativi che accedono ai vari servizi di aws.


AWS -> Service -> IAM -> Users -> Add user

* Una volta fatto login dalla ConsoleHome AWS faccaimo click sul service "IAM". 
* Andiamo sul link Users e ne creiamo uno nuovo cliccando "Add user".


* Step1
    User name   : user_fb
    Access type : AWS Management Console access
    Console password 
    -> Custom password : mypassword
    Require password reset : no
* Step2
    Permissions 
    -> policy : AmazonS3FullAccess
    -> policy : AWSCloud9Administrator
    -> policy : AWSCloud9EnvironmentMember
    -> policy : AWSCloud9User
* Step3
    Non aggiungiamo nessun tag
* Step4
    Visualizza il riepilogo delle scelte fatte
* Step5

![Fig. 01](images/01-base/01-new_app/02_fig01-aws_IAM_user_new_step1.png)

![Fig. 02](images/01-base/01-new_app/02_fig02-aws_IAM_user_new_step2a.png)

![Fig. 03](images/01-base/01-new_app/02_fig03-aws_IAM_user_new_step2b.png)

![Fig. 04](images/01-base/01-new_app/02_fig04-aws_IAM_user_new_step3.png)

![Fig. 05](images/01-base/01-new_app/02_fig05-aws_IAM_user_new_step4.png)




## Effettuiamo login come nuovo IAM utente Cloud9

Guardiamo lo User ARN -> arn:aws:iam::93703132901:user/cloud9

Il numero è usato per il login come utente


Effettuiamo il logout come amministratore

Nel login scegliamo -> "Sign in to a different account"

![Fig. 04](images/01-base/01-new_app/02_fig04-aws-login-as-iam-user-cloud9.png)
